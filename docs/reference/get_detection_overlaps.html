<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Get `overlapping' detections — get_detection_overlaps • flapper</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Get `overlapping' detections — get_detection_overlaps"><meta property="og:description" content="This function isolates detections that occurred at `effectively the same time' at different receivers with overlapping or non-overlapping detection containers. To implement the function, a dataframe of acoustic detections for a specific individual (acoustics) is required. Within this dataframe, the function isolates any detections that occurred within a user-specified time interval (clock_drift) at different receivers. If a list of the receivers with overlapping detection containers in space and time is supplied (overlaps), the function also flags the subset of these detections that occurred at receivers with overlapping or non-overlapping detection containers. This information is important for identifying potential false detections and the implementation of the AC* algorithm(s) (see Details). The function returns this information via summary message(s) along with a dataframe of the overlapping detections."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flapper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/flapper_algorithms_faqs.html">`flapper`: practitioner FAQs</a>
    </li>
    <li>
      <a href="../articles/flapper_overview.html">`flapper`: an overview</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/edwardlavender/flapper/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Get `overlapping' detections</h1>
    <small class="dont-index">Source: <a href="https://github.com/edwardlavender/flapper/blob/HEAD/R/get_detections.R" class="external-link"><code>R/get_detections.R</code></a></small>
    <div class="hidden name"><code>get_detection_overlaps.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function isolates detections that occurred at `effectively the same time' at different receivers with overlapping or non-overlapping detection containers. To implement the function, a dataframe of acoustic detections for a specific individual (<code>acoustics</code>) is required. Within this dataframe, the function isolates any detections that occurred within a user-specified time interval (<code>clock_drift</code>) at different receivers. If a list of the receivers with overlapping detection containers in space and time is supplied (<code>overlaps</code>), the function also flags the subset of these detections that occurred at receivers with overlapping or non-overlapping detection containers. This information is important for identifying potential false detections and the implementation of the AC* algorithm(s) (see Details). The function returns this information via summary message(s) along with a dataframe of the overlapping detections.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_detection_overlaps</span><span class="op">(</span><span class="va">acoustics</span>, overlaps <span class="op">=</span> <span class="cn">NULL</span>, clock_drift <span class="op">=</span> <span class="fl">5</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>acoustics</dt>
<dd><p>A dataframe of passive acoustic telemetry detection time series (see <code><a href="dat_acoustics.html">dat_acoustics</a></code> for an example) for a single individual. This must contain an integer vector of receiver IDs, named `receiver_id' and a POSIXct vector of time stamps when detections were made, named `timestamp'.</p></dd>


<dt>overlaps</dt>
<dd><p>(optional) A named list, from <code><a href="get_detection_containers_overlap.html">get_detection_containers_overlap</a></code>, that defines, for each receiver, for each day over its deployment period, whether or not its detection container overlapped with those of other receivers.</p></dd>


<dt>clock_drift</dt>
<dd><p>A number that defines the time (s) between sequential detections at which they are considered to have occurred at `effectively the same time'.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The function returns a message that defines the number of detections at different receivers that occurred at effectively the same time (within <code>clock_drift</code>) and, if <code>overlaps</code> is supplied, the subset of these that occurred at non-overlapping receivers. A dataframe is also invisibly returned that records the details of overlapping detections. This includes the following columns:</p><ul><li><p><code>timestamp_1</code>, a POSIXct vector of time stamps at which detections were made;</p></li>
<li><p><code>receiver_id_1</code>, an integer identifier of the receivers at which detections were made;</p></li>
<li><p><code>timestamp_2</code>, a POSIXct vector of the time stamps at which immediately subsequent detections were made;</p></li>
<li><p><code>receiver_id_2</code>, an integer identifier of the receivers at which the immediately subsequent detections were made;</p></li>
<li><p><code>diff_time</code>, a numeric vector that defines the time (s) between consecutive detections (<code>timestamp_1</code> and <code>timestamp_2</code>);</p></li>
<li><p><code>detection_in_overlapping_container</code>, a binary vector that defines whether (1) or not (0) the detection containers of <code>receiver_id_1</code> and <code>receiver_id_2</code> overlapped at the time of the detection (this is only included if <code>overlaps</code> is provided);</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>Detections at different receivers that occur at effectively the same time have important implications for inferences of animal movement patterns, especially via the AC* algorithm(s) in <code><a href="flapper.html">flapper</a></code> (e.g. <code><a href="acdc.html">acdc</a></code>). Within the AC* algorithm(s), when an individual is detected at the same time at two different receivers, detection probability kernels dictate that these receivers must have overlapping detection containers. If the detection containers do not overlap, this suggests that either (a) receiver clocks are not well-aligned; (b) the definition of `effectively the same time' is be overly large (such that the individual could move from within the detection container of one receiver into the detection container of another); (c) detection containers are too small and detection probability is higher than realised; and/or (d) one or more of the detections are false. The most likely cause may be guided by knowledge of the array design, detection probability and false detection algorithms. For example, if it is plausible that detection containers are too small, repeating the implementation of this function with larger containers may indicate whether or not this is likely to have been the case: if so, all detections that occurred at effectively the same time at receivers with non-overlapping detection containers should be captured by the large containers (though this does not rule out other explanations). The purpose of this function is to flag any such detections so that they can be investigated and addressed prior to the implementation of the AC* algorithm(s).</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Edward Lavender</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#### Example (1): Implement function using detection data for an example individual</span></span></span>
<span class="r-in"><span><span class="va">dat_acoustics_25</span> <span class="op">&lt;-</span> <span class="va">dat_acoustics</span><span class="op">[</span><span class="va">dat_acoustics</span><span class="op">$</span><span class="va">individual_id</span> <span class="op">==</span> <span class="fl">25</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">get_detection_overlaps</span><span class="op">(</span>acoustics <span class="op">=</span> <span class="va">dat_acoustics_25</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 517 observation(s) identified at another receiver within 5 secs.</span>
<span class="r-in"><span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           timestamp_1 receiver_id_1 receiver_id_2         timestamp_2 diff_time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2016-03-17 02:56:00            26            21 2016-03-17 02:56:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2016-03-17 04:08:00            26            21 2016-03-17 04:08:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2016-03-17 05:06:00            26            31 2016-03-17 05:06:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2016-03-17 05:10:00            31            26 2016-03-17 05:10:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2016-03-17 05:20:00            31            26 2016-03-17 05:20:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016-03-17 08:50:00            26            31 2016-03-17 08:50:00         0</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (2): Implement function, including information on detection containers</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Get detection container overlaps to include in function</span></span></span>
<span class="r-in"><span><span class="co">## (see ?flapper::get_detection_container_overlaps)</span></span></span>
<span class="r-in"><span><span class="co"># Define receiver locations</span></span></span>
<span class="r-in"><span><span class="va">proj_wgs84</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span>SRS_string <span class="op">=</span> <span class="st">"EPSG:4326"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">proj_utm</span>   <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span>SRS_string <span class="op">=</span> <span class="st">"EPSG:32629"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">dat_moorings</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="va">dat_moorings</span><span class="op">$</span><span class="va">receiver_id</span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html" class="external-link">SpatialPoints</a></span><span class="op">(</span><span class="va">dat_moorings</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"receiver_long"</span>, <span class="st">"receiver_lat"</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>                        <span class="va">proj_wgs84</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html" class="external-link">spTransform</a></span><span class="op">(</span><span class="va">xy</span>, <span class="va">proj_utm</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Get receiver-specific detection containers</span></span></span>
<span class="r-in"><span><span class="va">containers</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_detection_containers.html">get_detection_containers</a></span><span class="op">(</span><span class="va">xy</span>, byid <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-plt img"><img src="get_detection_overlaps-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">containers_df</span> <span class="op">&lt;-</span> <span class="va">dat_moorings</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"receiver_id"</span>,</span></span>
<span class="r-in"><span>                                 <span class="st">"receiver_start_date"</span>,</span></span>
<span class="r-in"><span>                                 <span class="st">"receiver_end_date"</span><span class="op">)</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/row.names.html" class="external-link">row.names</a></span><span class="op">(</span><span class="va">containers_df</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">containers</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">containers</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">SpatialPolygonsDataFrame</a></span><span class="op">(</span><span class="va">containers</span>, <span class="va">containers_df</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Define detection container overlaps</span></span></span>
<span class="r-in"><span><span class="va">overlaps</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_detection_containers_overlap.html">get_detection_containers_overlap</a></span><span class="op">(</span>containers <span class="op">=</span> <span class="va">containers</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Implement function with detection container overlaps included</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu">get_detection_overlaps</span><span class="op">(</span>acoustics <span class="op">=</span> <span class="va">dat_acoustics_25</span>, overlaps <span class="op">=</span> <span class="va">overlaps</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 517 observation(s) identified at another receiver within 5 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Of these, there are 2 observation(s) within 5 secs that are not in overlapping containers.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> These simulataneous detections at non-overlapping receivers occurred at 15 unique receiver pair(s): 3-9, 12-44, 21-26, 21-57, 26-31, 41-47, 43-57, 45-56, 45-57, 46-54, 46-52, 47-52, 49-53, 50-51, 52-54.</span>
<span class="r-in"><span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>           timestamp_1 receiver_id_1 receiver_id_2         timestamp_2 diff_time</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2016-03-17 02:56:00            26            21 2016-03-17 02:56:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2016-03-17 04:08:00            26            21 2016-03-17 04:08:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2016-03-17 05:06:00            26            31 2016-03-17 05:06:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2016-03-17 05:10:00            31            26 2016-03-17 05:10:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2016-03-17 05:20:00            31            26 2016-03-17 05:20:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016-03-17 08:50:00            26            31 2016-03-17 08:50:00         0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   detection_in_overlapping_container</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1                                  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                                  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3                                  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4                                  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                                  1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                                  1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Implement function across all individuals</span></span></span>
<span class="r-in"><span><span class="co"># For some individuals, there are simultaneous detections at receivers with</span></span></span>
<span class="r-in"><span><span class="co"># ... non overlapping detection containers, suggesting these are probably too small.</span></span></span>
<span class="r-in"><span><span class="va">dat_by_id</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">dat_acoustics</span>, <span class="va">dat_acoustics</span><span class="op">$</span><span class="va">individual_id</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         <span class="kw">function</span><span class="op">(</span><span class="va">acc_for_id</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>           <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"individual_id"</span>, <span class="va">acc_for_id</span><span class="op">$</span><span class="va">individual_id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"-------"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>           <span class="fu">get_detection_overlaps</span><span class="op">(</span>acoustics <span class="op">=</span> <span class="va">acc_for_id</span>, overlaps <span class="op">=</span> <span class="va">overlaps</span><span class="op">)</span></span></span>
<span class="r-in"><span>         <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "individual_id 25 -------"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 517 observation(s) identified at another receiver within 5 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Of these, there are 2 observation(s) within 5 secs that are not in overlapping containers.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> These simulataneous detections at non-overlapping receivers occurred at 15 unique receiver pair(s): 3-9, 12-44, 21-26, 21-57, 26-31, 41-47, 43-57, 45-56, 45-57, 46-54, 46-52, 47-52, 49-53, 50-51, 52-54.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "individual_id 28 -------"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 239 observation(s) identified at another receiver within 5 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Of these, there are 111 observation(s) within 5 secs that are not in overlapping containers.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> These simulataneous detections at non-overlapping receivers occurred at 9 unique receiver pair(s): 3-9, 3-33, 21-30, 21-26, 21-57, 43-57, 49-53, 50-51, 45-56.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "individual_id 35 -------"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 294 observation(s) identified at another receiver within 5 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Of these, there are 9 observation(s) within 5 secs that are not in overlapping containers.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> These simulataneous detections at non-overlapping receivers occurred at 6 unique receiver pair(s): 3-9, 3-33, 21-43, 21-45, 43-57, 45-57.</span>
<span class="r-in"><span><span class="co">## Test this hypothesis by re-implementing approach with larger containers</span></span></span>
<span class="r-in"><span><span class="co"># Re-define containers and receiver overlap</span></span></span>
<span class="r-in"><span><span class="va">containers</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_detection_containers.html">get_detection_containers</a></span><span class="op">(</span><span class="va">xy</span>, detection_range <span class="op">=</span> <span class="fl">750</span>, byid <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-plt img"><img src="get_detection_overlaps-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="va">containers</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPolygons.html" class="external-link">SpatialPolygonsDataFrame</a></span><span class="op">(</span><span class="va">containers</span>, <span class="va">containers_df</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">overlaps</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_detection_containers_overlap.html">get_detection_containers_overlap</a></span><span class="op">(</span>containers <span class="op">=</span> <span class="va">containers</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Re-implement algorithm</span></span></span>
<span class="r-in"><span><span class="va">dat_by_id</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/split.html" class="external-link">split</a></span><span class="op">(</span><span class="va">dat_acoustics</span>, <span class="va">dat_acoustics</span><span class="op">$</span><span class="va">individual_id</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>         <span class="kw">function</span><span class="op">(</span><span class="va">acc_for_id</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>           <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="st">"individual_id"</span>, <span class="va">acc_for_id</span><span class="op">$</span><span class="va">individual_id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, <span class="st">"-------"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>           <span class="fu">get_detection_overlaps</span><span class="op">(</span>acoustics <span class="op">=</span> <span class="va">acc_for_id</span>, overlaps <span class="op">=</span> <span class="va">overlaps</span><span class="op">)</span></span></span>
<span class="r-in"><span>         <span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "individual_id 25 -------"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 517 observation(s) identified at another receiver within 5 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Of these, there are 0 observation(s) within 5 secs that are not in overlapping containers.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "individual_id 28 -------"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 239 observation(s) identified at another receiver within 5 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Of these, there are 0 observation(s) within 5 secs that are not in overlapping containers.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "individual_id 35 -------"</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> 294 observation(s) identified at another receiver within 5 secs.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Of these, there are 0 observation(s) within 5 secs that are not in overlapping containers.</span>
<span class="r-in"><span><span class="co"># There are now no observations within clock_drift at receivers with</span></span></span>
<span class="r-in"><span><span class="co"># ... non-overlapping containers.</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

