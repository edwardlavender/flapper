<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Calculate the number of operational units through time — get_n_operational_ts • flapper</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate the number of operational units through time — get_n_operational_ts"><meta property="og:description" content="This function calculates the number of operational units through time (e.g., the number of individuals at liberty or the number of active acoustic receivers over the course of a study). To implement the function, a dataframe (data) must be supplied that defines the start and end time of each unit's operational period. Then, for each time step in a user-specified sequence of times, or an automatically generated sequence of times from the earliest start time to the latest end time in data, the function counts the number of units that were operational on each time step and returns a dataframe (and, if specified, a plot) with this information."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flapper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/flapper_algorithms_faqs.html">`flapper`: practitioner FAQs</a>
    </li>
    <li>
      <a href="../articles/flapper_overview.html">`flapper`: an overview</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/edwardlavender/flapper/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate the number of operational units through time</h1>
    <small class="dont-index">Source: <a href="https://github.com/edwardlavender/flapper/blob/HEAD/R/get_detections.R" class="external-link"><code>R/get_detections.R</code></a></small>
    <div class="hidden name"><code>get_n_operational_ts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function calculates the number of operational units through time (e.g., the number of individuals at liberty or the number of active acoustic receivers over the course of a study). To implement the function, a dataframe (<code>data</code>) must be supplied that defines the start and end time of each unit's operational period. Then, for each time step in a user-specified sequence of times, or an automatically generated sequence of times from the earliest start time to the latest end time in <code>data</code>, the function counts the number of units that were operational on each time step and returns a dataframe (and, if specified, a plot) with this information.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_n_operational_ts</span><span class="op">(</span><span class="va">data</span>, <span class="va">start</span>, <span class="va">stop</span>, times <span class="op">=</span> <span class="cn">NULL</span>, plot <span class="op">=</span> <span class="cn">TRUE</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>A dataframe of observations. At a minimum, this should contain two columns that define the start and end of each unit's operational period, identified by <code>start</code> and <code>stop</code> below.</p></dd>


<dt>start</dt>
<dd><p>A character string that defines the name of the column in <code>data</code> that defines the start time of each unit's operational period.</p></dd>


<dt>stop</dt>
<dd><p>A character string that defines the name of the column in <code>data</code> that defines the end time of each unit's operational period.</p></dd>


<dt>times</dt>
<dd><p>A vector of times for which to calculate the number of units that were operational at each time. If <code>times = NULL</code>, a regular sequence of dates from the first to the last date in <code>data</code> is used.</p></dd>


<dt>plot</dt>
<dd><p>A logical variable that defines whether or not to plot the time series of the number of operational units.</p></dd>


<dt>...</dt>
<dd><p>Additional arguments, passed to <code><a href="https://edwardlavender.github.io/prettyGraphics/reference/pretty_plot.html" class="external-link">pretty_plot</a></code>, to customise the plot.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The function returns a dataframe that, for each time step (`time'), defines the number of operational units at that time (`n'). If <code>plot = TRUE</code>, the function also plots a time series of the number of operational units.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>This is a simple metric of sampling effort. For acoustic receivers, <code><a href="get_detection_area_ts.html">get_detection_area_ts</a></code> provides another metric of sampling effort.</p>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Edward Lavender</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#### Example (1): Number of operational receivers over an acoustic telemetry study</span></span></span>
<span class="r-in"><span><span class="va">dat_n</span> <span class="op">&lt;-</span> <span class="fu">get_n_operational_ts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_moorings</span>,</span></span>
<span class="r-in"><span>                              start <span class="op">=</span> <span class="st">"receiver_start_date"</span>,</span></span>
<span class="r-in"><span>                              stop <span class="op">=</span> <span class="st">"receiver_end_date"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="get_n_operational_ts-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span><span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dat_n</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         time  n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2016-03-03 18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2016-03-04 18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2016-03-05 18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4 2016-03-06 18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5 2016-03-07 18</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6 2016-03-08 18</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (2): Number of individuals at liberty over a tagging study</span></span></span>
<span class="r-in"><span><span class="co"># Define 'tag_end_date' as hypothetical end date of a study</span></span></span>
<span class="r-in"><span><span class="co"># ...  and assume that all individuals remained tagged until this time</span></span></span>
<span class="r-in"><span><span class="va">dat_ids</span><span class="op">$</span><span class="va">tag_end_date</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="st">"2017-06-05"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat_n</span> <span class="op">&lt;-</span> <span class="fu">get_n_operational_ts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_ids</span>,</span></span>
<span class="r-in"><span>                              start <span class="op">=</span> <span class="st">"tag_start_date"</span>,</span></span>
<span class="r-in"><span>                              stop <span class="op">=</span> <span class="st">"tag_end_date"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="get_n_operational_ts-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (3): Specify the time period under consideration</span></span></span>
<span class="r-in"><span><span class="va">dat_n</span> <span class="op">&lt;-</span> <span class="fu">get_n_operational_ts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_ids</span>,</span></span>
<span class="r-in"><span>                              start <span class="op">=</span> <span class="st">"tag_start_date"</span>,</span></span>
<span class="r-in"><span>                              stop <span class="op">=</span> <span class="st">"tag_end_date"</span>,</span></span>
<span class="r-in"><span>                              times <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span><span class="va">dat_moorings</span><span class="op">$</span><span class="va">receiver_start_date</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                                          <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="va">dat_moorings</span><span class="op">$</span><span class="va">receiver_end_date</span><span class="op">)</span>, <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span>                              <span class="op">)</span></span></span>
<span class="r-plt img"><img src="get_n_operational_ts-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (4): Suppress or customise the plot</span></span></span>
<span class="r-in"><span><span class="va">dat_n</span> <span class="op">&lt;-</span> <span class="fu">get_n_operational_ts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_ids</span>,</span></span>
<span class="r-in"><span>                              start <span class="op">=</span> <span class="st">"tag_start_date"</span>,</span></span>
<span class="r-in"><span>                              stop <span class="op">=</span> <span class="st">"tag_end_date"</span>,</span></span>
<span class="r-in"><span>                              plot <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat_n</span> <span class="op">&lt;-</span> <span class="fu">get_n_operational_ts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">dat_ids</span>,</span></span>
<span class="r-in"><span>                              start <span class="op">=</span> <span class="st">"tag_start_date"</span>,</span></span>
<span class="r-in"><span>                              stop <span class="op">=</span> <span class="st">"tag_end_date"</span>,</span></span>
<span class="r-in"><span>                              xlab <span class="op">=</span> <span class="st">"Time"</span>, ylab <span class="op">=</span> <span class="st">"N (individuals)"</span>,</span></span>
<span class="r-in"><span>                              type <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="get_n_operational_ts-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (5): Additional examples with simulated data</span></span></span>
<span class="r-in"><span><span class="co"># Example with one unit deployed on each day</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3L</span>,</span></span>
<span class="r-in"><span>                  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2016-01-01"</span>, <span class="st">"2016-01-02"</span>, <span class="st">"2016-01-03"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  stop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2016-01-01"</span>, <span class="st">"2016-01-02"</span>, <span class="st">"2016-01-03"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>                  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_n_operational_ts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">tmp</span>, start <span class="op">=</span> <span class="st">"start"</span>, stop <span class="op">=</span> <span class="st">"stop"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Lower and upper limits for an inputted variable are identical. This is usually because all values of this variable are identical. Adjusted limits (+/- 25 % or +/- 0.25 or +/- 60 s) implemented.</span>
<span class="r-plt img"><img src="get_n_operational_ts-5.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         time n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 2016-01-01 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 2016-01-02 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3 2016-01-03 1</span>
<span class="r-in"><span><span class="co"># Example with one unit deployed over a longer period</span></span></span>
<span class="r-in"><span><span class="va">tmp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">3L</span>,</span></span>
<span class="r-in"><span>                  start <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2016-01-01"</span>, <span class="st">"2016-01-02"</span>, <span class="st">"2016-01-03"</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                  stop <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/as.Date.html" class="external-link">as.Date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2016-01-10"</span>, <span class="st">"2016-01-02"</span>, <span class="st">"2016-01-03"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>                  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_n_operational_ts</span><span class="op">(</span>data <span class="op">=</span> <span class="va">tmp</span>, start <span class="op">=</span> <span class="st">"start"</span>, stop <span class="op">=</span> <span class="st">"stop"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="get_n_operational_ts-6.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          time n</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  2016-01-01 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  2016-01-02 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  2016-01-03 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  2016-01-04 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  2016-01-05 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  2016-01-06 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  2016-01-07 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  2016-01-08 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  2016-01-09 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 2016-01-10 1</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

