<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calculate the total distance of a path over a three-dimensional surface — dist_over_surface • flapper</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calculate the total distance of a path over a three-dimensional surface — dist_over_surface" />
<meta property="og:description" content="This function calculates the total distance of a path, whose horizontal coordinates are known, over a three-dimensional surface. To implement the function, the path should be supplied as a matrix or dataframe of coordinates or a SpatialLines object and the surface should be supplied as a raster. The function takes the horizontal coordinates of the path and extracts the values of the surface at these points, and then calculates the total distance of the path as the sum of the paired distances between each pair of points." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flapper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/flapper.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/edwardlavender/flapper/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calculate the total distance of a path over a three-dimensional surface</h1>
    <small class="dont-index">Source: <a href='https://github.com/edwardlavender/flapper/blob/master/R/dists.R'><code>R/dists.R</code></a></small>
    <div class="hidden name"><code>dist_over_surface.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function calculates the total distance of a path, whose horizontal coordinates are known, over a three-dimensional surface. To implement the function, the <code>path</code> should be supplied as a matrix or dataframe of coordinates or a <code><a href='https://rdrr.io/pkg/sp/man/SpatialLines.html'>SpatialLines</a></code> object and the <code>surface</code> should be supplied as a <code><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></code>. The function takes the horizontal coordinates of the <code>path</code> and extracts the values of the surface at these points, and then calculates the total distance of the path as the sum of the paired distances between each pair of points.</p>
    </div>

    <pre class="usage"><span class='fu'>dist_over_surface</span><span class='op'>(</span><span class='va'>path</span>, <span class='va'>surface</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>path</th>
      <td><p>A matrix or dataframe of horizontal coordinates (x, y) or a <code><a href='https://rdrr.io/pkg/sp/man/SpatialLines.html'>SpatialLines</a></code> object which defines the path over a surface. The coordinate reference system (projection) of <code>path</code> should be the same as that for the <code>surface</code>.</p></td>
    </tr>
    <tr>
      <th>surface</th>
      <td><p>A <code><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></code> over which the movement that generated the path occurred. The coordinate reference system (projection) of <code>path</code> should be the same as that for the <code>surface</code> and the values of the <code>surface</code> should also be expressed in the same units (e.g., metres).</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns a number equal to the total distance along the path.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The total distance of a path over a three-dimensional surface is equal to the sum of the pairwise distances between each point (\(i\)) and its successor (\(i + 1\)) according to the equation: $$\Sigma_{i = 1}^n \sqrt{(x_{i+1} - x_i)^2 + (y_{i + 1} - y_i)^2 + (z_{i + 1} - z_i)^2)}$$ where \(x\), \(y\) and \(z\) are the x, y and z coordinates of each point in three-dimensional space and \(n\) is the total number of points minus 1. Pairwise distances are calculated via <code><a href='dist_btw_points_3d.html'>dist_btw_points_3d</a></code>. Note that for realistic distances, some interpolation (e.g., via least-cost paths) between points may be required to generate localisations at sufficiently high resolution to effectively capture the shape of the landscape.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p>If the coordinates of the points are known in three dimensions already, <code><a href='dist_btw_points_3d.html'>dist_btw_points_3d</a></code> can be used directly.</p></div>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Edward Lavender</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#### Simulate a hypothetical landscape</span>
<span class='co'># Define a miniature, blank landscape with known dimensions</span>
<span class='va'>proj_utm</span> <span class='op'>&lt;-</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/CRS-class.html'>CRS</a></span><span class='op'>(</span>SRS_string <span class='op'>=</span> <span class='st'>"EPSG:32629"</span><span class='op'>)</span>
<span class='va'>r</span> <span class='op'>&lt;-</span> <span class='fu'>raster</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/raster.html'>raster</a></span><span class='op'>(</span>nrows <span class='op'>=</span> <span class='fl'>3</span>, ncols <span class='op'>=</span> <span class='fl'>3</span>,
                    crs <span class='op'>=</span> <span class='va'>proj_utm</span>,
                    resolution <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>5</span><span class='op'>)</span>,
                    ext <span class='op'>=</span> <span class='fu'>raster</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/extent.html'>extent</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>15</span>, <span class='fl'>0</span>, <span class='fl'>15</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># Define a matrix of hypothetical values for the landscape</span>
<span class='va'>mat</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>10</span>, <span class='fl'>3</span>,
                <span class='fl'>2</span>, <span class='fl'>1</span>, <span class='fl'>4</span>,
                <span class='fl'>5</span>, <span class='fl'>6</span>, <span class='fl'>6</span><span class='op'>)</span>, ncol <span class='op'>=</span> <span class='fl'>3</span>, nrow <span class='op'>=</span> <span class='fl'>3</span>, byrow <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span>
<span class='va'>r</span><span class='op'>[</span><span class='op'>]</span> <span class='op'>&lt;-</span> <span class='va'>mat</span>
<span class='co'># Visualise simulated landscape</span>
<span class='fu'>raster</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
</div><div class='input'><span class='fu'>raster</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/raster/man/text.html'>text</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span>
</div><div class='input'>
<span class='co'>#### Example (1): Total distance between two example adjacent points</span>
<span class='va'>path_cells</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span><span class='op'>)</span>
<span class='va'>path_matrix</span> <span class='op'>&lt;-</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/coordinates.html'>coordinates</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>[</span><span class='va'>path_cells</span>, <span class='op'>]</span>
<span class='fu'>dist_over_surface</span><span class='op'>(</span><span class='va'>path_matrix</span>, <span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 7.071068</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>5</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>10</span><span class='op'>-</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 7.071068</div><div class='input'>
<span class='co'>#### Example (2): Total distance between two example diagonal points</span>
<span class='va'>path_cells</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>5</span><span class='op'>)</span>
<span class='va'>path_matrix</span> <span class='op'>&lt;-</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/coordinates.html'>coordinates</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>[</span><span class='va'>path_cells</span>, <span class='op'>]</span>
<span class='fu'>dist_over_surface</span><span class='op'>(</span><span class='va'>path_matrix</span>, <span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 8.124038</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>5</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='fl'>5</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>5</span> <span class='op'>-</span> <span class='fl'>1</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 8.124038</div><div class='input'>
<span class='co'>#### Example (3): Total distance along a longer path</span>
<span class='va'>path_cells</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span><span class='op'>)</span>
<span class='va'>path_matrix</span> <span class='op'>&lt;-</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/coordinates.html'>coordinates</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>[</span><span class='va'>path_cells</span>, <span class='op'>]</span>
<span class='fu'>dist_over_surface</span><span class='op'>(</span><span class='va'>path_matrix</span>, <span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 15.67339</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>5</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>10</span><span class='op'>-</span><span class='fl'>5</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span> <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>sqrt</a></span><span class='op'>(</span><span class='fl'>5</span><span class='op'>^</span><span class='fl'>2</span> <span class='op'>+</span> <span class='op'>(</span><span class='fl'>10</span><span class='op'>-</span><span class='fl'>3</span><span class='op'>)</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 15.67339</div><div class='input'>
<span class='co'>#### Example (4): Total distance along an even longer path</span>
<span class='va'>path_cells</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>6</span>, <span class='fl'>8</span><span class='op'>)</span>
<span class='va'>path_matrix</span> <span class='op'>&lt;-</span> <span class='fu'>sp</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/sp/man/coordinates.html'>coordinates</a></span><span class='op'>(</span><span class='va'>r</span><span class='op'>)</span><span class='op'>[</span><span class='va'>path_cells</span>, <span class='op'>]</span>
<span class='fu'>dist_over_surface</span><span class='op'>(</span><span class='va'>path_matrix</span>, <span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 28.12088</div><div class='input'>
<span class='co'>#### Example (5): A SpatialLines object can be used for the path</span>
<span class='va'>path_line</span> <span class='op'>&lt;-</span> <span class='fu'>Orcs</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/Orcs/man/coords2Lines.html'>coords2Lines</a></span><span class='op'>(</span><span class='va'>path_matrix</span>, ID <span class='op'>=</span> <span class='fl'>1</span>, proj4string <span class='op'>=</span> <span class='va'>proj_utm</span><span class='op'>)</span>
<span class='fu'>raster</span><span class='fu'>::</span><span class='fu'>lines</span><span class='op'>(</span><span class='va'>path_line</span><span class='op'>)</span>
</div><div class='img'><img src='dist_over_surface-1.png' alt='' width='700' height='433' /></div><div class='input'><span class='fu'>dist_over_surface</span><span class='op'>(</span><span class='va'>path_line</span>, <span class='va'>r</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 28.12088</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


