<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Matricise receiver deployment time series — make_matrix_receivers • flapper</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Matricise receiver deployment time series — make_matrix_receivers" />
<meta property="og:description" content="This function creates a matrix that, for each time step (matrix row) in a sequence of user-defined times, defines whether or not each receiver (matrix column) was active. To implement the function, a dataframe with receiver IDs and deployment start and end times must be supplied (via moorings). Servicing dates can also be accounted for via a dataframe with receiver IDs and servicing times (services). The times for which to express whether or not each receiver was active are provided by optionally defining a start and end date (these can be taken from the range of deployment times in moorings if unspecified) and the interval (delta_t) between time steps." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flapper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/flapper.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/edwardlavender/flapper/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Matricise receiver deployment time series</h1>
    <small class="dont-index">Source: <a href='https://github.com/edwardlavender/flapper/blob/master/R/make_matrices.R'><code>R/make_matrices.R</code></a></small>
    <div class="hidden name"><code>make_matrix_receivers.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function creates a matrix that, for each time step (matrix row) in a sequence of user-defined times, defines whether or not each receiver (matrix column) was active. To implement the function, a dataframe with receiver IDs and deployment start and end times must be supplied (via <code>moorings</code>). Servicing dates can also be accounted for via a dataframe with receiver IDs and servicing times (<code>services</code>). The times for which to express whether or not each receiver was active are provided by optionally defining a <code>start</code> and <code>end</code> date (these can be taken from the range of deployment times in <code>moorings</code> if unspecified) and the interval (<code>delta_t</code>) between time steps.</p>
    </div>

    <pre class="usage"><span class='fu'>make_matrix_receivers</span><span class='op'>(</span>
  <span class='va'>moorings</span>,
  services <span class='op'>=</span> <span class='cn'>NULL</span>,
  start <span class='op'>=</span> <span class='cn'>NULL</span>,
  end <span class='op'>=</span> <span class='cn'>NULL</span>,
  delta_t <span class='op'>=</span> <span class='st'>"120 mins"</span>,
  as_POSIXct <span class='op'>=</span> <span class='va'>as.POSIXct</span>,
  set_names <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>moorings</th>
      <td><p>A dataframe that defines receiver IDs and deployment times. This must contain the following columns: an identifier for receivers (named `receiver_id'), the start time of receiver' deployment periods (`receiver_start_date') and the end time of receivers' deployment periods (`receiver_end_date') (see <code><a href='dat_moorings.html'>dat_moorings</a></code> for an example). Deployment times can be recorded as Date or POSIXct objects.</p></td>
    </tr>
    <tr>
      <th>services</th>
      <td><p>(optional) A dataframe that defines receiver IDs and servicing dates (times during the deployment period of a receiver when it was not active due to servicing). If provided, this must contain the following columns: an identifier for serviced receivers (named `receiver_id') and two columns that define the time of the service(s) (`service_start_date' and `service_end_date'). Times can be recorded as Date or POSIXct objects. Before/after service events, receivers are assumed to have been deployed in the same locations; receiver deployments in different locations before/after servicing should be treated as distinct deployments in <code>moorings</code>.</p></td>
    </tr>
    <tr>
      <th>start, end</th>
      <td><p>Date or POSIXct objects that define the start and end time. If unspecified, these are taken from the range of deployment times in <code>moorings</code>.</p></td>
    </tr>
    <tr>
      <th>delta_t</th>
      <td><p>A number or character that defines the time interval between successive time steps. This is passed to the `by' argument of <code><a href='https://rdrr.io/r/base/seq.POSIXt.html'>seq.POSIXt</a></code> or <code><a href='https://rdrr.io/r/base/seq.Date.html'>seq.Date</a></code> (depending on <code>as_POSIXct</code>, below).</p></td>
    </tr>
    <tr>
      <th>as_POSIXct</th>
      <td><p>(optional) A function that coerces supplied any supplied times (<code>moorings$receiver_start_date</code>, <code>moorings$receiver_end_date</code>, <code>services$service_start_date</code>, <code>services$service_end_date</code>, <code>start</code> and <code>end</code>) that are not POSIXct objects to POSIXct objects. This can be suppressed via <code>as_POSIXct = NULL</code> if supplied times are Date objects and <code>delta_t</code> is not less than one day.</p></td>
    </tr>
    <tr>
      <th>set_names</th>
      <td><p>A logical variable that defines whether or not to set the row and column names of the matrix to the time steps and the receiver IDs respectively.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The function returns a matrix with one row for each time step and one column for each receiver. Each cell defines whether (1) or not (0) each receiver was at active during that time step. A `bins' attribute is included, which defines the time steps as a Date or POSIXct vector.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Edward Lavender</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>#### Example (1): Illustration using fake data</span>

<span class='co'>## Define some example 'moorings' data</span>
<span class='co'># ... with receiver IDs and deployment times</span>
<span class='va'>moorings</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>receiver_id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>2</span>, <span class='fl'>3</span>, <span class='fl'>4</span>, <span class='fl'>5</span><span class='op'>)</span>,
                       receiver_start_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"2016-01-01"</span>,
                                                       <span class='st'>"2016-01-02"</span>,
                                                       <span class='st'>"2016-01-03"</span>,
                                                       <span class='st'>"2016-01-04"</span>,
                                                       <span class='st'>"2016-01-05"</span><span class='op'>)</span><span class='op'>)</span>,
                       receiver_end_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"2016-01-06"</span>,
                                                     <span class='st'>"2016-01-07"</span>,
                                                     <span class='st'>"2016-01-08"</span>,
                                                     <span class='st'>"2016-01-09"</span>,
                                                     <span class='st'>"2016-01-09"</span><span class='op'>)</span><span class='op'>)</span>
                       <span class='op'>)</span>

<span class='co'>## Define some example 'servicing' data</span>
<span class='co'># ... with receiver IDs and servicing times</span>
<span class='co'># ... Here, receiver 1 was serviced twice</span>
<span class='co'># ... ... from 2016-01-02--3 and 2016-01-04--5</span>
<span class='co'># ... and receiver 5 was serviced</span>
<span class='co'># ... ... on 2016-01-08.</span>
<span class='va'>services</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/data.frame.html'>data.frame</a></span><span class='op'>(</span>receiver_id <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>1</span>, <span class='fl'>5</span><span class='op'>)</span>,
                       service_start_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"2016-01-02"</span>,
                                                      <span class='st'>"2016-01-04"</span>,
                                                      <span class='st'>"2016-01-08"</span><span class='op'>)</span><span class='op'>)</span>,
                       service_end_date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"2016-01-03"</span>,
                                                    <span class='st'>"2016-01-05"</span>,
                                                    <span class='st'>"2016-01-08"</span><span class='op'>)</span><span class='op'>)</span>
                       <span class='op'>)</span>

<span class='co'>## Get daily receiver status (0, 1) matrix</span>
<span class='fu'>make_matrix_receivers</span><span class='op'>(</span><span class='va'>moorings</span>, delta_t <span class='op'>=</span> <span class='st'>"days"</span>, as_POSIXct <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            1 2 3 4 5
#&gt; 2016-01-01 1 0 0 0 0
#&gt; 2016-01-02 1 1 0 0 0
#&gt; 2016-01-03 1 1 1 0 0
#&gt; 2016-01-04 1 1 1 1 0
#&gt; 2016-01-05 1 1 1 1 1
#&gt; 2016-01-06 1 1 1 1 1
#&gt; 2016-01-07 0 1 1 1 1
#&gt; 2016-01-08 0 0 1 1 1
#&gt; 2016-01-09 0 0 0 1 1
#&gt; attr(,"bins")
#&gt; [1] "2016-01-01" "2016-01-02" "2016-01-03" "2016-01-04" "2016-01-05"
#&gt; [6] "2016-01-06" "2016-01-07" "2016-01-08" "2016-01-09"</div><div class='input'>
<span class='co'>## Get daily receiver status (0, 1) matrix</span>
<span class='co'># ... accounting for servicing dates</span>
<span class='fu'>make_matrix_receivers</span><span class='op'>(</span><span class='va'>moorings</span>, <span class='va'>services</span>, delta_t <span class='op'>=</span> <span class='st'>"days"</span>, as_POSIXct <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>
</div><div class='output co'>#&gt;            1 2 3 4 5
#&gt; 2016-01-01 1 0 0 0 0
#&gt; 2016-01-02 0 1 0 0 0
#&gt; 2016-01-03 0 1 1 0 0
#&gt; 2016-01-04 0 1 1 1 0
#&gt; 2016-01-05 0 1 1 1 1
#&gt; 2016-01-06 1 1 1 1 1
#&gt; 2016-01-07 0 1 1 1 1
#&gt; 2016-01-08 0 0 1 1 0
#&gt; 2016-01-09 0 0 0 1 1
#&gt; attr(,"bins")
#&gt; [1] "2016-01-01" "2016-01-02" "2016-01-03" "2016-01-04" "2016-01-05"
#&gt; [6] "2016-01-06" "2016-01-07" "2016-01-08" "2016-01-09"</div><div class='input'>
<span class='co'>#### Example (2): Illustration using actual data</span>
<span class='co'># ... for different time windows</span>
<span class='va'>mat_days</span>  <span class='op'>&lt;-</span> <span class='fu'>make_matrix_receivers</span><span class='op'>(</span><span class='va'>dat_moorings</span>, delta_t <span class='op'>=</span> <span class='st'>"days"</span>, as_POSIXct <span class='op'>=</span> <span class='cn'>NULL</span><span class='op'>)</span>
<span class='va'>mat_hours</span> <span class='op'>&lt;-</span> <span class='fu'>make_matrix_receivers</span><span class='op'>(</span><span class='va'>dat_moorings</span>, delta_t <span class='op'>=</span> <span class='st'>"hours"</span><span class='op'>)</span>
<span class='fu'>utils</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>mat_days</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  num [1:508, 1:40] 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  - attr(*, "bins")= Date[1:508], format: "2016-03-03" "2016-03-04" ...
#&gt;  - attr(*, "dimnames")=List of 2
#&gt;   ..$ : chr [1:508] "2016-03-03" "2016-03-04" "2016-03-05" "2016-03-06" ...
#&gt;   ..$ : chr [1:40] "3" "4" "7" "9" ...</div><div class='input'><span class='fu'>utils</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/r/utils/str.html'>str</a></span><span class='op'>(</span><span class='va'>mat_hours</span><span class='op'>)</span>
</div><div class='output co'>#&gt;  num [1:12169, 1:40] 1 1 1 1 1 1 1 1 1 1 ...
#&gt;  - attr(*, "bins")= POSIXct[1:12169], format: "2016-03-03 00:00:00" "2016-03-03 01:00:00" ...
#&gt;  - attr(*, "dimnames")=List of 2
#&gt;   ..$ : chr [1:12169] "2016-03-03 00:00:00" "2016-03-03 01:00:00" "2016-03-03 02:00:00" "2016-03-03 03:00:00" ...
#&gt;   ..$ : chr [1:40] "3" "4" "7" "9" ...</div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


