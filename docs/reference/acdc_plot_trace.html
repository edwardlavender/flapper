<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Plot AC* container dynamics — acdc_plot_trace • flapper</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Plot AC* container dynamics — acdc_plot_trace"><meta property="og:description" content="This function visually reconstructs the dynamics of an acoustic-container* (AC*) algorithm (i.e., ac or acdc).
To implement the function, an acdc_record-class object (record) from ac or acdc plus acdc_simplify that defines the outputs of the AC* algorithm is required. A SpatialPointsDataFrame that defines receiver locations and a matrix that defines the daily operational status of each receiver are also required.
For each time step, the function plots the probability surface, the receiver(s) at which the individual was detected and the acoustic containers, illustrating how the expansion, contraction and intersection of acoustic containers capture the set of possible locations for an individual through time."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">flapper</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/flapper_algorithms_faqs.html">`flapper`: practitioner FAQs</a>
    </li>
    <li>
      <a href="../articles/flapper_overview.html">`flapper`: an overview</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/edwardlavender/flapper/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Plot AC* container dynamics</h1>
    <small class="dont-index">Source: <a href="https://github.com/edwardlavender/flapper/blob/HEAD/R/acdc_analyse_record.R" class="external-link"><code>R/acdc_analyse_record.R</code></a></small>
    <div class="hidden name"><code>acdc_plot_trace.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This function visually reconstructs the dynamics of an acoustic-container* (AC*) algorithm (i.e., <code><a href="ac.html">ac</a></code> or <code><a href="acdc.html">acdc</a></code>).</p>
<p>To implement the function, an <code><a href="acdc_record-class.html">acdc_record-class</a></code> object (<code>record</code>) from <code><a href="ac.html">ac</a></code> or <code><a href="acdc.html">acdc</a></code> plus <code><a href="acdc_simplify.html">acdc_simplify</a></code> that defines the outputs of the AC* algorithm is required. A <code><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html" class="external-link">SpatialPointsDataFrame</a></code> that defines receiver locations and a matrix that defines the daily operational status of each receiver are also required.</p>
<p>For each time step, the function plots the probability surface, the receiver(s) at which the individual was detected and the acoustic containers, illustrating how the expansion, contraction and intersection of acoustic containers capture the set of possible locations for an individual through time.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">acdc_plot_trace</span><span class="op">(</span></span>
<span>  <span class="va">record</span>,</span>
<span>  plot <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">moorings</span>,</span>
<span>  <span class="va">moorings_matrix</span>,</span>
<span>  add_raster <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  add_receiver_1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">4</span>, lwd <span class="op">=</span> <span class="fl">4</span>, col <span class="op">=</span> <span class="st">"darkgreen"</span><span class="op">)</span>,</span>
<span>  add_receiver_2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">4</span>, lwd <span class="op">=</span> <span class="fl">2</span>, col <span class="op">=</span> <span class="st">"darkorange"</span><span class="op">)</span>,</span>
<span>  add_receiver_3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">4</span>, lwd <span class="op">=</span> <span class="fl">1</span>, col <span class="op">=</span> <span class="st">"darkred"</span><span class="op">)</span>,</span>
<span>  add_receiver_n <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>pch <span class="op">=</span> <span class="fl">4</span>, lwd <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>,</span>
<span>  add_container_ap <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"darkgreen"</span><span class="op">)</span>,</span>
<span>  add_container_an <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"darkgreen"</span><span class="op">)</span>,</span>
<span>  add_container_b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col <span class="op">=</span> <span class="st">"darkorange"</span><span class="op">)</span>,</span>
<span>  add_container_c <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html" class="external-link">alpha</a></span><span class="op">(</span><span class="st">"forestgreen"</span>, <span class="fl">0.5</span><span class="op">)</span>, density <span class="op">=</span> <span class="fl">20</span><span class="op">)</span>,</span>
<span>  add_coastline <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  add_main <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  par_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  png_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  prompt <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>record</dt>
<dd><p>A <code><a href="acdc_record-class.html">acdc_record-class</a></code> object from <code><a href="ac.html">ac</a></code> or <code><a href="acdc.html">acdc</a></code> plus <code><a href="acdc_simplify.html">acdc_simplify</a></code>.</p></dd>


<dt>plot</dt>
<dd><p>An integer vector that defines the time steps for which to make plots. If <code>plot = NULL</code>, the function will make a plot for all time steps for which the necessary information is available in <code>record</code>.</p></dd>


<dt>moorings</dt>
<dd><p>A <code><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html" class="external-link">SpatialPointsDataFrame</a></code> that defines receiver locations (in the Universe Transverse Mercator coordinate reference system) and receiver IDs (in a column named `receiver_id').</p></dd>


<dt>moorings_matrix</dt>
<dd><p>A matrix that defines, for each day of the study (rows) and each receiver (columns), receivers' operational status (see <code><a href="make_matrix_receivers.html">make_matrix_receivers</a></code>).</p></dd>


<dt>add_raster</dt>
<dd><p>A named list of arguments, passed to <code><a href="https://edwardlavender.github.io/prettyGraphics/reference/add_sp.html" class="external-link">add_sp_raster</a></code>, to plot the location-probability surface.</p></dd>


<dt>add_receiver_1, add_receiver_2, add_receiver_3, add_receiver_n</dt>
<dd><p>Named lists of arguments, passed to <code><a href="https://rdrr.io/r/graphics/points.html" class="external-link">points</a></code>, to customise the appearance of receivers. <code>add_receiver_1</code> controls the appearance of the `current' receiver (at which the individual was last or has just been detected); <code>add_receiver_2</code> controls the appearance of the receiver at which the individual was next detected; <code>add_receiver_3</code> controls the appearance of the third receiver at which the individual was detected; and <code>add_receiver_n</code> controls the appearance of all remaining active receivers.</p></dd>


<dt>add_container_ap, add_container_an, add_container_b, add_container_c</dt>
<dd><p>Named lists of arguments that control the appearance of acoustic containers. (<code>container_ap</code> defines the boundaries of the individual's location from the perspective of its previous location; <code>container_an</code> defines the boundaries of the individual's location at the moment of detection from the perspective of the receiver that recorded the detection; <code>container_b</code> defines the boundaries of the individual's location from the perspective of the receiver at which the individual was next detected; and <code>container_c</code> defines the boundaries of the individual's location integrated across all of these perspectives; see <code><a href="acdc_record-class.html">acdc_record-class</a></code>.) <code>add_container_ap,add_container_an</code> and <code>add_container_b</code> are passed to <code><a href="https://rdrr.io/pkg/raster/man/spplot.html" class="external-link">lines,SpatialPolygons-method</a></code> and <code>add_container_c</code> is passed to <code><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></code>.</p></dd>


<dt>add_coastline</dt>
<dd><p>A named list of arguments, passed to <code><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></code>, to add coastline to each plot.</p></dd>


<dt>add_main</dt>
<dd><p>A named list of arguments, passed to <code><a href="https://rdrr.io/r/graphics/mtext.html" class="external-link">mtext</a></code>, to customise the appearance of the plot title. Default plot titles are structured as follows: `Map for t = cumulative time step (detection time step [intermediate time step] time stamp'. When the intermediate time step is one, the individual is detected. At subsequent intermediate time steps, acoustic containers expand and contract.</p></dd>


<dt>...</dt>
<dd><p>Additional plot customisation options passed to <code><a href="https://edwardlavender.github.io/prettyGraphics/reference/pretty_map.html" class="external-link">pretty_map</a></code>.</p></dd>


<dt>par_param</dt>
<dd><p>A named list of arguments, passed to <code><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></code>, to set the plotting window.</p></dd>


<dt>png_param</dt>
<dd><p>(optional) A named list of arguments, passed to <code><a href="https://rdrr.io/r/grDevices/png.html" class="external-link">png</a></code>, to save plots to file. If supplied, the plot for each time step is saved separately. The `filename' argument should be the directory in which plots are saved. Plots are then saved as "1.png", "2.png" and so on. If supplied, <code>prompt</code> is ignored (see below).</p></dd>


<dt>prompt</dt>
<dd><p>If <code>png_param</code> is not specified, <code>prompt</code> is a logical variable that defines whether or not to pause function execution between plots and between containers within plots to facilitate interpretation.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The function returns, for each time step, a plot of the probability surface and acoustic containers.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="ac.html">ac</a></code> and <code><a href="acdc.html">acdc</a></code> implement the AC and ACDC algorithms and <code><a href="acdc_simplify.html">acdc_simplify</a></code> simplifies the results. <code><a href="acdc_plot_record.html">acdc_plot_record</a></code> and <code><a href="acdc_animate_record.html">acdc_animate_record</a></code> provide additional visualisation routines.</p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Edward Lavender</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#### Prepare example AC algorithm outputs with spatial files</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Define example time series</span></span></span>
<span class="r-in"><span><span class="va">id</span> <span class="op">&lt;-</span> <span class="fl">25</span></span></span>
<span class="r-in"><span><span class="va">acc</span> <span class="op">&lt;-</span> <span class="va">dat_acoustics</span><span class="op">[</span><span class="va">dat_acoustics</span><span class="op">$</span><span class="va">individual_id</span> <span class="op">==</span> <span class="va">id</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">acc</span><span class="op">$</span><span class="va">timestamp</span> <span class="op">&lt;-</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/round_date.html" class="external-link">round_date</a></span><span class="op">(</span><span class="va">acc</span><span class="op">$</span><span class="va">timestamp</span>, <span class="st">"2 mins"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">acc</span><span class="op">$</span><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">acc</span><span class="op">$</span><span class="va">timestamp</span>, <span class="st">"-"</span>, <span class="va">acc</span><span class="op">$</span><span class="va">receiver_id</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">acc</span> <span class="op">&lt;-</span> <span class="va">acc</span><span class="op">[</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/duplicated.html" class="external-link">duplicated</a></span><span class="op">(</span><span class="va">acc</span><span class="op">$</span><span class="va">key</span><span class="op">)</span>, <span class="op">]</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">20</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Define receiver locations ('moorings' SPDF) and activity status matrix</span></span></span>
<span class="r-in"><span><span class="co"># Receiver locations</span></span></span>
<span class="r-in"><span><span class="va">proj_wgs84</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span>SRS_string <span class="op">=</span> <span class="st">"EPSG:4326"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">proj_utm</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/CRS-class.html" class="external-link">CRS</a></span><span class="op">(</span>SRS_string <span class="op">=</span> <span class="st">"EPSG:32629"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html" class="external-link">SpatialPoints</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">dat_moorings</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"receiver_long"</span>, <span class="st">"receiver_lat"</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  <span class="va">proj_wgs84</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">xy</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/spTransform.html" class="external-link">spTransform</a></span><span class="op">(</span><span class="va">xy</span>, <span class="va">proj_utm</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">moorings</span> <span class="op">&lt;-</span> <span class="fu">sp</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/sp/man/SpatialPoints.html" class="external-link">SpatialPointsDataFrame</a></span><span class="op">(</span><span class="va">xy</span>, data <span class="op">=</span> <span class="va">dat_moorings</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Daily activity status matrix</span></span></span>
<span class="r-in"><span><span class="va">as_POSIXct</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/as.POSIXlt.html" class="external-link">as.POSIXct</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">x</span>, <span class="st">"00:00:00"</span><span class="op">)</span>, tz <span class="op">=</span> <span class="st">"UTC"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">moorings_mat</span> <span class="op">&lt;-</span> <span class="fu"><a href="make_matrix_receivers.html">make_matrix_receivers</a></span><span class="op">(</span><span class="va">dat_moorings</span>,</span></span>
<span class="r-in"><span>  delta_t <span class="op">=</span> <span class="st">"days"</span>,</span></span>
<span class="r-in"><span>  as_POSIXct <span class="op">=</span> <span class="va">as_POSIXct</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Prepare grid</span></span></span>
<span class="r-in"><span><span class="co"># We will use a regular, relatively high resolution grid,</span></span></span>
<span class="r-in"><span><span class="co"># focused on a small area around the receivers at which the ID was detected</span></span></span>
<span class="r-in"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html" class="external-link">extent</a></span><span class="op">(</span><span class="va">dat_gebco</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  res <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">25</span>, <span class="fl">25</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  crs <span class="op">=</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crs.html" class="external-link">crs</a></span><span class="op">(</span><span class="va">dat_gebco</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/resample.html" class="external-link">resample</a></span><span class="op">(</span><span class="va">dat_gebco</span>, <span class="va">grid</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ext</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/extent.html" class="external-link">extent</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="fu">rgeos</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rgeos/man/rgeos-deprecated.html" class="external-link">gBuffer</a></span><span class="op">(</span><span class="va">moorings</span><span class="op">[</span><span class="va">moorings</span><span class="op">$</span><span class="va">receiver_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">acc</span><span class="op">$</span><span class="va">receiver_id</span>, <span class="op">]</span>,</span></span>
<span class="r-in"><span>      width <span class="op">=</span> <span class="fl">10000</span></span></span>
<span class="r-in"><span>    <span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-in"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">grid</span>, <span class="va">ext</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">grid</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/trim.html" class="external-link">trim</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">grid</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="acdc_plot_trace-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Define detection containers/probability kernels</span></span></span>
<span class="r-in"><span><span class="co"># Define detection containers</span></span></span>
<span class="r-in"><span><span class="va">moorings</span> <span class="op">&lt;-</span> <span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/terra/man/crop.html" class="external-link">crop</a></span><span class="op">(</span><span class="va">moorings</span>, <span class="va">grid</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat_container</span> <span class="op">&lt;-</span> <span class="fu"><a href="acs_setup_containers.html">acs_setup_containers</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  xy <span class="op">=</span> <span class="va">moorings</span>,</span></span>
<span class="r-in"><span>  detection_range <span class="op">=</span> <span class="fl">425</span>,</span></span>
<span class="r-in"><span>  coastline <span class="op">=</span> <span class="va">dat_coast</span>,</span></span>
<span class="r-in"><span>  boundaries <span class="op">=</span> <span class="va">ext</span>,</span></span>
<span class="r-in"><span>  plot <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>  resolution <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> flapper::acs_setup_detection_containers() called (@ 2023-08-29 15:34:32)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Checking user inputs... </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>'rownames(xy@data) overwritten with xy$receiver_id.</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Plotting background map of area... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Making containers... </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-plt img"><img src="acdc_plot_trace-2.png" alt="" width="700" height="433"></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Plotting containers on map... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Processing containers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... flapper::acs_setup_detection_containers() call completed (@ 2023-08-29 15:34:33) after ~0.01 minutes. </span>
<span class="r-in"><span><span class="co"># Define detection container overlaps</span></span></span>
<span class="r-in"><span><span class="va">containers_spdf</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/do.call.html" class="external-link">do.call</a></span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/pkg/raster/man/bind.html" class="external-link">bind</a></span>, <span class="fu">plyr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/plyr/man/compact.html" class="external-link">compact</a></span><span class="op">(</span><span class="va">dat_containers</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">containers_spdf</span><span class="op">@</span><span class="va">data</span> <span class="op">&lt;-</span> <span class="va">dat_moorings</span></span></span>
<span class="r-in"><span><span class="va">dat_containers_overlaps</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="get_detection_containers_overlap.html">get_detection_containers_overlap</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    containers <span class="op">=</span> <span class="va">containers_spdf</span>,</span></span>
<span class="r-in"><span>    services <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Define detection probability kernels</span></span></span>
<span class="r-in"><span><span class="va">calc_dpr</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;=</span> <span class="fl">425</span>, <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html" class="external-link">plogis</a></span><span class="op">(</span><span class="fl">2.5</span> <span class="op">+</span> <span class="op">-</span><span class="fl">0.02</span> <span class="op">*</span> <span class="va">x</span><span class="op">)</span>, <span class="fl">0</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">}</span></span></span>
<span class="r-in"><span><span class="va">dat_kernels</span> <span class="op">&lt;-</span> <span class="fu"><a href="acs_setup_detection_kernels.html">acs_setup_detection_kernels</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  xy <span class="op">=</span> <span class="va">moorings</span>,</span></span>
<span class="r-in"><span>  services <span class="op">=</span> <span class="cn">NULL</span>,</span></span>
<span class="r-in"><span>  containers <span class="op">=</span> <span class="va">dat_containers</span>,</span></span>
<span class="r-in"><span>  overlaps <span class="op">=</span> <span class="va">dat_containers_overlaps</span>,</span></span>
<span class="r-in"><span>  calc_detection_pr <span class="op">=</span> <span class="va">calc_dpr</span>,</span></span>
<span class="r-in"><span>  bathy <span class="op">=</span> <span class="va">grid</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> flapper::acs_setup_detection_kernels() called (@ 2023-08-29 15:34:33)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Setting up function... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Getting receiver-specific kernels (for detection)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 3 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 9 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 18 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 21 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 24 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 26 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 27 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 30 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 31 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 33 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 36 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 37 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 38 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 43 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 45 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 48 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 49 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 50 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 51 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 53 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 55 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 56 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... For receiver 57 ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Isolating detection container ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating distances from the receiver ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Calculating detection probability ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Processing kernel ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Getting receiver-specific inverse kernels... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Getting area-wide kernels (for non-detection)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... Get unique array designs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... Get area wide kernels for each array design... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 1/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 2/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 3/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 4/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 5/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 6/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 7/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 8/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 9/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 10/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 11/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... For design 12/12... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Extract detection probability kernels for active receivers... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... ... Combining detection kernels to calculate the background detection probability surfaces (this is a slow step)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Process detection probability kernels ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... flapper::acs_setup_detection_kernels() call completed (@ 2023-08-29 15:34:41) after ~0.14 minutes. </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Implement AC algorithm</span></span></span>
<span class="r-in"><span><span class="va">out_ac</span> <span class="op">&lt;-</span> <span class="fu"><a href="ac.html">ac</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  acoustics <span class="op">=</span> <span class="va">acc</span>,</span></span>
<span class="r-in"><span>  step <span class="op">=</span> <span class="fl">120</span>,</span></span>
<span class="r-in"><span>  bathy <span class="op">=</span> <span class="va">grid</span>,</span></span>
<span class="r-in"><span>  detection_containers <span class="op">=</span> <span class="va">dat_containers</span>,</span></span>
<span class="r-in"><span>  detection_kernels <span class="op">=</span> <span class="va">dat_kernels</span>,</span></span>
<span class="r-in"><span>  detection_kernels_overlap <span class="op">=</span> <span class="va">dat_containers_overlaps</span>,</span></span>
<span class="r-in"><span>  mobility <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>  save_record_spatial <span class="op">=</span> <span class="cn">NULL</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> flapper::ac() called (@ 2023-08-29 15:34:41)...</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> flapper::.acs_pl() called (@ 2023-08-29 15:34:41)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Checking user inputs... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Processing movement time series... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Plotting movement time series (for each chunk)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Calling .acs() to implement ACDC algorithm on one chunk... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> flapper::.acs() called (@ 2023-08-29 15:34:41)... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |                                                                      |   0%... Initiating algorithm: moving over acoustic and internal ('archival') time steps... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... On acoustic time step ('timestep_detection') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |====                                                                  |   5%... On acoustic time step ('timestep_detection') 2. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |=======                                                               |  11%... On acoustic time step ('timestep_detection') 3. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 2. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Acoustic container is expanding... </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |===========                                                           |  16%... On acoustic time step ('timestep_detection') 4. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |===============                                                       |  21%... On acoustic time step ('timestep_detection') 5. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 2. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Acoustic container is expanding... </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |==================                                                    |  26%... On acoustic time step ('timestep_detection') 6. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |======================                                                |  32%... On acoustic time step ('timestep_detection') 7. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |==========================                                            |  37%... On acoustic time step ('timestep_detection') 8. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |=============================                                         |  42%... On acoustic time step ('timestep_detection') 9. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |=================================                                     |  47%... On acoustic time step ('timestep_detection') 10. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |=====================================                                 |  53%... On acoustic time step ('timestep_detection') 11. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |=========================================                             |  58%... On acoustic time step ('timestep_detection') 12. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |============================================                          |  63%... On acoustic time step ('timestep_detection') 13. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |================================================                      |  68%... On acoustic time step ('timestep_detection') 14. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |====================================================                  |  74%... On acoustic time step ('timestep_detection') 15. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |=======================================================               |  79%... On acoustic time step ('timestep_detection') 16. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 2. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Acoustic container is expanding... </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 3. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... ... Acoustic container is constant ... </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |===========================================================           |  84%... On acoustic time step ('timestep_detection') 17. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |===============================================================       |  89%... On acoustic time step ('timestep_detection') 18. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 2. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 3. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 4. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 5. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 6. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 7. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 8. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 9. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 10. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |==================================================================    |  95%... On acoustic time step ('timestep_detection') 19. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... ... On internal time step ('timestep_archival') 1. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>GEOS support is provided by the sf and terra packages among others</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   |                                                                              |======================================================================| 100%</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... Movement over acoustic and internal ('archival') time steps has been completed. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... flapper::.acs() call completed (@ 2023-08-29 15:34:44) after ~0.05 minutes. </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ... flapper::.acs_pl() call completed (@ 2023-08-29 15:34:44) after ~0.05 minutes. </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> flapper::ac() finished (@ 2023-08-29 15:34:44)...</span>
<span class="r-plt img"><img src="acdc_plot_trace-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Simplify outputs</span></span></span>
<span class="r-in"><span><span class="va">record</span> <span class="op">&lt;-</span> <span class="fu"><a href="acdc_simplify.html">acdc_simplify</a></span><span class="op">(</span><span class="va">out_ac</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> acdc_simplify() implemented for type = 'acs'.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (1): Implement the function with default arguments</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">acdc_plot_trace</span><span class="op">(</span><span class="va">record</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="va">moorings</span>, <span class="va">moorings_mat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (2): Customise plot via add_* arguments and ...</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu">acdc_plot_trace</span><span class="op">(</span><span class="va">record</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="va">moorings</span>, <span class="va">moorings_mat</span>,</span></span>
<span class="r-in"><span>    add_raster <span class="op">=</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>plot_method <span class="op">=</span> <span class="fu">raster</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    add_coastline <span class="op">=</span></span></span>
<span class="r-in"><span>      <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat_coast</span>, col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html" class="external-link">alpha</a></span><span class="op">(</span><span class="st">"dimgrey"</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">699000</span>, <span class="fl">711000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6250000</span>, <span class="fl">6269500</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#### Example (3): Save plots to file via the png_param argument</span></span></span>
<span class="r-in"><span><span class="va">con</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/acdc_trace/"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.exists</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">acdc_plot_trace</span><span class="op">(</span><span class="va">record</span>, <span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="va">moorings</span>, <span class="va">moorings_mat</span>,</span></span>
<span class="r-in"><span>  add_raster <span class="op">=</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>plot_method <span class="op">=</span> <span class="fu">raster</span><span class="fu">::</span><span class="va"><a href="https://rdrr.io/r/base/plot.html" class="external-link">plot</a></span>, legend <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  add_coastline <span class="op">=</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">dat_coast</span>, col <span class="op">=</span> <span class="fu">scales</span><span class="fu">::</span><span class="fu"><a href="https://scales.r-lib.org/reference/alpha.html" class="external-link">alpha</a></span><span class="op">(</span><span class="st">"dimgrey"</span>, <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  xlim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">699000</span>, <span class="fl">711000</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6250000</span>, <span class="fl">6269500</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  png_param <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>filename <span class="op">=</span> <span class="va">con</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  prompt <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">con</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "1.png"  "10.png" "11.png" "12.png" "13.png" "14.png" "15.png" "16.png"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [9] "17.png" "18.png" "19.png" "2.png"  "20.png" "21.png" "22.png" "23.png"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [17] "24.png" "25.png" "26.png" "27.png" "28.png" "29.png" "3.png"  "30.png"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "31.png" "4.png"  "5.png"  "6.png"  "7.png"  "8.png"  "9.png" </span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Edward Lavender.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

